# Work Manager Backend - é¡¹ç›®æ€»ç»“

## ğŸ‰ é¡¹ç›®å®ŒæˆçŠ¶æ€

âœ… **é¡¹ç›®å·²æˆåŠŸå®ç°å¹¶æ¨é€åˆ° GitHub**: https://github.com/neoo726/work_manager_backend.git

## ğŸ“‹ å®ç°çš„åŠŸèƒ½

### æ ¸å¿ƒ API æ¥å£
1. **æ™ºèƒ½è®°å½•å·¥ä½œäº‹é¡¹** (`POST /smart_record_work_item`)
   - æ”¯æŒä»»åŠ¡ã€ä¼šè®®ã€é—®é¢˜ã€æƒ³æ³•ã€ç¬”è®°ç­‰å¤šç§ç±»å‹
   - æ™ºèƒ½è§£æç”¨æˆ·è¾“å…¥
   - æ”¯æŒé¡¹ç›®åˆ†ç±»ã€ä¼˜å…ˆçº§ã€æ ‡ç­¾ç­‰å±æ€§

2. **æŸ¥è¯¢å·¥ä½œäº‹é¡¹** (`POST /query_work_items`)
   - å¤šæ¡ä»¶æŸ¥è¯¢ï¼ˆæ—¶é—´èŒƒå›´ã€é¡¹ç›®ã€ç±»å‹ã€çŠ¶æ€ã€å…³é”®è¯ï¼‰
   - æ”¯æŒæ¨¡ç³Šæœç´¢
   - æ™ºèƒ½æ—¶é—´èŒƒå›´è§£æ

3. **æ›´æ–°å·¥ä½œäº‹é¡¹** (`POST /update_work_item`)
   - æ”¯æŒçŠ¶æ€æ›´æ–°
   - æ”¯æŒå±æ€§ä¿®æ”¹
   - æ™ºèƒ½åŒ¹é…ç›®æ ‡äº‹é¡¹

4. **å¥åº·æ£€æŸ¥** (`GET /health`)
   - æœåŠ¡çŠ¶æ€ç›‘æ§
   - æ•°æ®åº“è¿æ¥æ£€æŸ¥

### æŠ€æœ¯ç‰¹æ€§
- **FastAPI æ¡†æ¶**: ç°ä»£ã€é«˜æ€§èƒ½çš„ Web æ¡†æ¶
- **PostgreSQL æ•°æ®åº“**: å¯é çš„å…³ç³»å‹æ•°æ®åº“
- **Pydantic æ•°æ®éªŒè¯**: å¼ºç±»å‹æ•°æ®æ¨¡å‹
- **å®Œæ•´çš„é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **è‡ªåŠ¨ API æ–‡æ¡£**: Swagger UI å’Œ ReDoc
- **Docker æ”¯æŒ**: å®¹å™¨åŒ–éƒ¨ç½²
- **CORS æ”¯æŒ**: è·¨åŸŸè¯·æ±‚å¤„ç†

## ğŸ“ é¡¹ç›®ç»“æ„

```
work_manager_backend/
â”œâ”€â”€ main.py                 # FastAPI ä¸»åº”ç”¨
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ database.py            # æ•°æ®åº“è¿æ¥ç®¡ç†
â”œâ”€â”€ models.py              # Pydantic æ•°æ®æ¨¡å‹
â”œâ”€â”€ utils.py               # å·¥å…·å‡½æ•°
â”œâ”€â”€ init_db.sql            # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ init_db.py             # æ•°æ®åº“åˆå§‹åŒ–ç¨‹åº
â”œâ”€â”€ test_api.py            # API æµ‹è¯•è„šæœ¬
â”œâ”€â”€ start.py               # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â”œâ”€â”€ Dockerfile             # Docker é•œåƒé…ç½®
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â”œâ”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ openapi.yaml           # OpenAPI è§„èŒƒï¼ˆç”¨äº Dify é›†æˆï¼‰
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ dify-integration.md # Dify é›†æˆæŒ‡å—
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šPython ç›´æ¥è¿è¡Œ
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/neoo726/work_manager_backend.git
cd work_manager_backend

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥

# 4. åˆå§‹åŒ–æ•°æ®åº“
python init_db.py

# 5. å¯åŠ¨æœåŠ¡
python start.py
```

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/neoo726/work_manager_backend.git
cd work_manager_backend

# 2. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼ˆDocker æ¨¡å¼ä½¿ç”¨é»˜è®¤é…ç½®å³å¯ï¼‰

# 3. ä¸€é”®éƒ¨ç½²
chmod +x deploy.sh
./deploy.sh
```

## ğŸ”— ä¸ Dify é›†æˆ

1. **å¯¼å…¥ OpenAPI è§„èŒƒ**: ä½¿ç”¨é¡¹ç›®ä¸­çš„ `openapi.yaml` æ–‡ä»¶
2. **é…ç½®æœåŠ¡åœ°å€**: ä¿®æ”¹ OpenAPI ä¸­çš„æœåŠ¡å™¨åœ°å€
3. **åˆ›å»º HTTP è¯·æ±‚å·¥å…·**: åœ¨ Dify ä¸­é…ç½®å·¥å…·
4. **å¯ç”¨ AI åŠ©æ‰‹**: åœ¨ Agent ä¸­å¯ç”¨å·¥å…·

è¯¦ç»†é›†æˆæ­¥éª¤è¯·å‚è€ƒ: `docs/dify-integration.md`

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### work_items è¡¨ç»“æ„
- `id`: ä¸»é”®
- `user_id`: ç”¨æˆ·æ ‡è¯†
- `type`: äº‹é¡¹ç±»å‹ï¼ˆtask/meeting/issue/idea/note/otherï¼‰
- `content`: åŸå§‹å†…å®¹
- `summary`: æ‘˜è¦
- `project_name`: é¡¹ç›®åç§°
- `due_date`: æˆªæ­¢æ—¥æœŸ
- `start_date`: å¼€å§‹æ—¥æœŸ
- `status`: çŠ¶æ€ï¼ˆtodo/in_progress/completed/resolved/cancelledï¼‰
- `priority`: ä¼˜å…ˆçº§ï¼ˆ1-5ï¼‰
- `tags`: æ ‡ç­¾ï¼ˆJSONï¼‰
- `created_at`: åˆ›å»ºæ—¶é—´
- `updated_at`: æ›´æ–°æ—¶é—´

### ç´¢å¼•ä¼˜åŒ–
- ç”¨æˆ·æŸ¥è¯¢ç´¢å¼•
- æ—¶é—´èŒƒå›´ç´¢å¼•
- å…¨æ–‡æœç´¢ç´¢å¼•
- å¤åˆæŸ¥è¯¢ç´¢å¼•

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œ API æµ‹è¯•
python test_api.py

# è®¿é—® API æ–‡æ¡£
http://localhost:8000/docs
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `DB_HOST`: æ•°æ®åº“ä¸»æœº
- `DB_NAME`: æ•°æ®åº“åç§°
- `DB_USER`: æ•°æ®åº“ç”¨æˆ·
- `DB_PASSWORD`: æ•°æ®åº“å¯†ç 
- `DB_PORT`: æ•°æ®åº“ç«¯å£
- `HOST`: æœåŠ¡ç›‘å¬åœ°å€
- `PORT`: æœåŠ¡ç«¯å£
- `DEBUG`: è°ƒè¯•æ¨¡å¼

### éƒ¨ç½²é€‰é¡¹
- **æœ¬åœ°å¼€å‘**: ç›´æ¥è¿è¡Œ Python
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **äº‘æœåŠ¡**: æ”¯æŒå„ç§äº‘å¹³å°
- **Serverless**: å¯é€‚é… Serverless å¹³å°

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **æ€§èƒ½ä¼˜åŒ–**: æ·»åŠ ç¼“å­˜ã€è¿æ¥æ± ä¼˜åŒ–
2. **å®‰å…¨å¢å¼º**: æ·»åŠ è®¤è¯ã€æˆæƒæœºåˆ¶
3. **åŠŸèƒ½æ‰©å±•**: æ‰¹é‡æ“ä½œã€æ–‡ä»¶é™„ä»¶ã€é€šçŸ¥ç³»ç»Ÿ
4. **ç›‘æ§å‘Šè­¦**: æ·»åŠ æ—¥å¿—ã€ç›‘æ§ã€å‘Šè­¦
5. **API ç‰ˆæœ¬ç®¡ç†**: æ”¯æŒ API ç‰ˆæœ¬æ§åˆ¶

## ğŸ“ æ”¯æŒ

- **GitHub**: https://github.com/neoo726/work_manager_backend
- **Issues**: åœ¨ GitHub ä¸Šæäº¤é—®é¢˜
- **æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›® README å’Œ docs ç›®å½•

---

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆå¹¶å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ
**æœ€åæ›´æ–°**: 2024-01-15
